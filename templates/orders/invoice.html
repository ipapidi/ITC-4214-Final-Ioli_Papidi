{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Invoice - {{ order.order_number }}</title>
    <link rel="stylesheet" href="{% static 'css/invoice.css' %}">
</head>
<body>
<div class="invoice-container">
    <div class="header">
        <div class="logo">
            <img src="{% static 'images/logo.png' %}" alt="RevForge Logo" style="height:40px;vertical-align:middle;margin-right:10px;">
            
        </div>
        <div class="order-info">
            <div><strong>Invoice #:</strong> {{ order.order_number }}</div>
            <div><strong>Date:</strong> {{ order.created_at|date:"M d, Y H:i" }}</div>
        </div>
    </div>
    <div class="section">
        <div class="section-title">Billed To</div>
        <div>{{ order.user.get_full_name|default:order.user.username }}</div>
        <div>{{ order.shipping_address }}</div>
        <div>{{ order.shipping_city }}, {{ order.shipping_state }} {{ order.shipping_postal_code }}</div>
        <div>{{ order.shipping_country }}</div>
        <div>{{ order.shipping_phone }}</div>
    </div>
    <div class="section">
        <div class="section-title">Order Summary</div>
        <table>
            <thead>
                <tr>
                    <th>Product</th>
                    <th>SKU</th>
                    <th>Qty</th>
                    <th class="right">Unit Price</th>
                    <th class="right">Total</th>
                </tr>
            </thead>
            <tbody>
            {% for item in order.items.all %}
                <tr>
                    <td>{{ item.product_name }}</td>
                    <td>{{ item.product_sku }}</td>
                    <td>{{ item.quantity }}</td>
                    <td class="right">${{ item.unit_price }}</td>
                    <td class="right">${{ item.total_price }}</td>
                </tr>
            {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="4" class="right">Subtotal</td>
                    <td class="right">${{ order.subtotal }}</td>
                </tr>
                <tr>
                    <td colspan="4" class="right">Tax</td>
                    <td class="right">${{ order.tax_amount }}</td>
                </tr>
                <tr>
                    <td colspan="4" class="right">Shipping</td>
                    <td class="right">${{ order.shipping_cost }}</td>
                </tr>
                {% if order.discount_amount > 0 %}
                <tr>
                    <td colspan="4" class="right">Discount</td>
                    <td class="right">-${{ order.discount_amount }}</td>
                </tr>
                {% endif %}
                <tr class="total-row">
                    <td colspan="4" class="right">Total</td>
                    <td class="right">${{ order.total_amount }}</td>
                </tr>
            </tfoot>
        </table>
    </div>
    <div class="section">
        <div class="section-title">Payment Method</div>
        <div>{{ order.payment_method }}</div>
        {% if order.payment_transaction_id %}
        <div><strong>Transaction ID:</strong> {{ order.payment_transaction_id }}</div>
        {% endif %}
    </div>
    <div class="footer">
        Thank you for your order!<br>
        &copy; {{ now|date:"Y" }} RevForge. All rights reserved.
    </div>
    <button class="no-print" onclick="window.print()" style="margin-top:24px; padding:10px 24px; font-size:1rem; background:#c0392b; color:#fff; border:none; border-radius:6px; cursor:pointer;">Print / Save as PDF</button>
</div>
<script src="{% static 'js/orders_invoice.js' %}" defer></script>
</body>
</html> 